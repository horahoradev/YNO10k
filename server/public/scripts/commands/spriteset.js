
let spriteSheetList = {
	nikki:[
	"000000000054",
	"000000000053",
	"0000000000000000000029",
	"0000000000000000000030",
	"0000000000000000000031",
	"000001",
	"00002",
	"00003",
	"00004",
	"00005",
	"00006",
	"00007",
	"00008",
	"00009",
	"00010",
	"00000011",
	"00000012",
	"0000013",
	"0000014",
	"0000015",
	"000000000000000016",
	"000000000000000017",
	"0000000000000018",
	"0000000000000019",
	"0000000000000020",
	"0000000000000021",
	"00000000000000022",
	"00000000000000023",
	"00000000000000024",
	"00000000000000025",
	"00000000000000026",
	"00000000000000027",
	"00000000000000028",
	"000000000032",
	"000000000033",
	"000000000034",
	"000000000035",
	"000000000036",
	"000000000037",
	"000000000038",
	"000000000039",
	"000000000040",
	"000000000041",
	"000000000042",
	"000000000043",
	"000000000044",
	"000000000045",
	"000000000046",
	"000000000047",
	"000000000048",
	"000000000049",
	"000000000050",
	"000000000051",
	"000000000052",
	"000000000053",
	"000000000054",
	"000000000055",
	"000000000056",
	"000000000057",
	"000000000058",
	"000000000059",
	"000000000060",
	"000000000061",
	"000000000062",
	"000000000063",
	"000000000064",
	"0000000078",
	"0000000079",
	"0000000080",
	"0000000081",
	"0000000082",
	"0000000083",
	"0000000084",
	"0000000000000095",
	"0000000000000096",
	"0000000000000097"
]
};

let spriteList = { 
	nikki: {
		monoe: {sheet: "000000000054", id: 0},
		monoko: {sheet: "000000000053", id: 3},
		boombox: {sheet: "000000000047", id: 0},
		tv: {sheet: "000000000054", id: 5},
		poniko: {sheet: "000000000056", id: 4},
		uboa: {sheet: "000000000056", id: 5},
		masada: {sheet: "000000000056", id: 6},
		fc_umbrella_eff: { sheet: "0000000000000018", id: 1},
		fc_frog_eff: { sheet: "0000000000000018", id: 2},
		fc_hat_scarf_eff: { sheet: "0000000000000018", id: 3},
		fc_l_hair_eff: { sheet: "0000000000000018", id: 4},
		fc_p_phair_eff: { sheet: "0000000000000018", id: 5},
		fc_snowman: { sheet: "0000000000000018", id: 6},
		fc_b_hair_eff: { sheet: "0000000000000018", id: 7},
		fc_flute_eff: { sheet: "0000000000000019", id: 0},
		fc_no_face_eff: { sheet: "0000000000000019", id: 1},
		fc_eye_palm_eff: { sheet: "0000000000000019", id: 2},
		fc_towel_eff: { sheet: "0000000000000019", id: 3},
		fc_knife_eff: { sheet: "0000000000000019", id: 4},
		fc_blindfold_eff: { sheet: "0000000000000019", id: 5},
		fc_bicycle_eff: { sheet: "0000000000000019", id: 6},
		fc_severed_head_eff: { sheet: "0000000000000019", id: 7},
		fc_neon_eff: { sheet: "0000000000000020", id: 0},
		fc_triangle_kerchief_eff: { sheet: "0000000000000020", id: 1},
		fc_fat_eff: { sheet: "0000000000000020", id: 2},
		fc_cat_eff: { sheet: "0000000000000020", id: 3},
		fc_crooked_neck: { sheet: "0000000000000020", id: 4},
		fc_midget_eff: { sheet: "0000000000000020", id: 5},
		fc_snow_woman_eff: { sheet: "0000000000000020", id: 6},
		fc_lamp_eff: { sheet: "0000000000000020", id: 7},
		fc_which_eff : { sheet: "0000000000000021", id: 0},
		fc_which_eff_fly: { sheet: "0000000000000021", id: 4},
		fc_oni_eff: { sheet: "0000000000000021", id: 1},
		fc_squish_eff: { sheet: "0000000000000021", id: 2},
		fc_stoplight_eff_1: { sheet: "0000000000000021", id: 3},
		fc_stoplight_eff_2: { sheet: "0000000000000021", id: 6},
		fc_stoplight_eff_3: { sheet: "0000000000000021", id: 7},
		NASU: { sheet: "000000000000000017", id: 0},
		frog: { sheet: "000000000033", id: 4},
		toriningen_1: { sheet: "000000000036", id: 0},
		toriningen_2: { sheet: "000000000036", id: 1},
		toriningen_3: { sheet: "000000000036", id: 2},
		toriningen_1_c: { sheet: "000000000036", id: 3},
		toriningen_2_c: { sheet: "000000000036", id: 4},
		toriningen_3_c: { sheet: "000000000036", id: 5},
		nenrikido_1: { sheet: "000000000049", id: 3},
		nenrikido_2: { sheet: "000000000049", id: 7},
		nenrikido_3: { sheet: "000000000053", id: 1},
		nenrikido_4: { sheet: "000000000053", id: 5},
		mafurako: { sheet: "0000000081", id: 5},
		jellyfish_1: { sheet: "000000000036", id: 6},
		jellyfish_2: { sheet: "000000000036", id: 7},
		pissipissini: { sheet: "000000000055", id: 7},
		follony: { sheet: "000000000034", id: 7},
		fleebie: { sheet: "000000000034", id: 6},
		no_face_ghost: { sheet: "000000000032", id: 5},
		batsu: { sheet: "000000000058", id: 0},
		towel: { sheet: "000000000035", id: 5},
		snow_woman: { sheet: "000000000035", id: 2},
		kamakurako: { sheet: "000000000050", id: 0},
		kamakurako: { sheet: "000000000050", id: 1},
		mouth_monster_1: { sheet: "000000000034", id: 3},
		mouth_monster_2: { sheet: "000000000034", id: 4},
		mouth_monster_3: { sheet: "000000000034", id: 5},
		pirori_1: { sheet: "000000000000000017", id: 4},
		pirori_2: { sheet: "000000000044", id: 3},
		pirori_3: { sheet: "000000000045", id: 0},
		pirori_4: { sheet: "000000000057", id: 4},
		alley_demon: { sheet: "000000000045", id: 1},
		submarine_fish_1: { sheet: "000000000046", id: 1},
		submarine_fish_2: { sheet: "000000000046", id: 5},
		cube_guru: { sheet: "000000000046", id: 3},
		fisherman: { sheet: "000000000049", id: 4},
		mall_shopper_1: { sheet: "000000000045", id: 2},
		mall_shopper_2: { sheet: "000000000045", id: 3},
		mall_shopper_3: { sheet: "000000000045", id: 4},
		mall_shopper_4: { sheet: "000000000045", id: 5},
		mall_shopper_5: { sheet: "000000000045", id: 6},
		mall_shopper_6: { sheet: "000000000045", id: 7},
		mall_shopper_1_d: { sheet: "000000000047", id: 2},
		mall_shopper_2_d: { sheet: "000000000047", id: 3},
		mall_shopper_3_d: { sheet: "000000000047", id: 4},
		mall_shopper_4_d: { sheet: "000000000047", id: 5},
		mall_shopper_5_d: { sheet: "000000000047", id: 6},
		mall_shopper_6_d: { sheet: "000000000047", id: 7},
		black_cat_a: { sheet: "000000000064", id:0},
		black_cat_b: {sheet: "000000000064", id:4},
		e_man: { sheet: "000000000047", id: 1},
		o_man: { sheet: "000000000046", id: 7},
		tokuto_kun_1: { sheet: "000000000048", id: 0},
		tokuto_kun_2: { sheet: "000000000048", id: 2},
		tokuto_kun_3: { sheet: "000000000048", id: 4},
		medamaude: { sheet: "000000000034", id: 0},
		dwarf: { sheet: "000000000035", id: 6},
		walking_candle: { sheet: "000000000056", id: 2},
		closet_creature: { sheet: "000000000032", id: 4},
		nekoin: { sheet: "000000000034", id: 2},
		neon_creature_1: { sheet: "000000000033", id: 7},
		neon_creature_2: { sheet: "000000000043", id: 2},
		neon_creature_3: { sheet: "000000000043", id: 3},
		neon_creature_4: { sheet: "000000000043", id: 6},
		neon_creature_5: { sheet: "000000000043", id: 7},
		neon_creature_6: { sheet: "000000000044", id: 0},
		neon_creature_6: { sheet: "000000000062", id: 1},
		neon_parrot: { sheet: "000000000033", id: 6},
		wheelie_1: { sheet: "000000000055", id: 0},
		wheelie_2: { sheet: "000000000055", id: 1},
		wheelie_3: { sheet: "000000000055", id: 2},
		wheelie_4: { sheet: "000000000055", id: 3},
		leif: { sheet: "000000000054", id: 3},
		guillotine: { sheet: "000000000033", id: 1},
		walking_lamp: { sheet: "000000000035", id: 3},
		shitai_san: { sheet: "000000000051", id: 4},
		warpo: { sheet: "000000000050", id: 2},
		loople: { sheet: "000000000050", id: 3},
		train_passenger_1: { sheet: "000000000052", id: 3},
		train_passenger_2: { sheet: "000000000052", id: 4},
		witch_1: { sheet: "000000000051", id: 5},
		witch_2: { sheet: "000000000051", id: 6},
		kisu_tenmetsu: { sheet: "000000000052", id: 0},
		dekishi_san: { sheet: "000000000052", id: 3},
		tasei_kid: { sheet: "000000000052", id: 1},
		kimajo: { sheet: "000000000051", id: 3},
		dave_spector_1: { sheet: "000000000053", id: 2},
		dave_spector_2: {sheet: "000000000054", id: 7},
		white_hand: { sheet: "000000000053", id: 7},
		eye_people: { sheet: "000000000054", id: 4},
		dropfish: { sheet: "000000000049", id: 2},
		sea_snake: { sheet: "000000000048", id: 5},
		strober: { sheet: "000000000063", id: 2},
		organoid: { sheet: "000000000058", id: 5},
		maussan_bro_1: { sheet: "000000000058", id: 2},
		maussan_bro_2: { sheet: "000000000058", id: 3},
		maussan_bro_3: { sheet: "000000000058", id: 4},
		ghostmen: { sheet: "000000000058", id: 6},
		walking_eye: { sheet: "000000000000000016", id: 1},
		merutomaro: { sheet: "000000000000000016", id: 2},
		kinoko_1: { sheet: "000000000000000016", id: 3},
		kinoko_2: { sheet: "000000000000000016", id: 4},
		fc_demon: { sheet: "000000000000000016", id: 0},
		lizardmen_1: { sheet: "000000000000000017", id: 5},
		lizardmen_2: { sheet: "000000000000000017", id: 6},
		lizardmen_3: { sheet: "000000000000000017", id: 7},
		lizardmen_4: { sheet: "000000000052", id: 5},
		lizardmen_5: { sheet: "000000000052", id: 6},
		lizardmen_5: { sheet: "000000000052", id: 7},
		buyo: { sheet: "000000000000000017", id:  2},
		balloon_1: { sheet: "000000000054", id: 1},
		balloon_2: { sheet: "000000000054", id: 2},
		balloon_3: { sheet: "000000000056", id: 0},
		balloon_4: { sheet: "000000000056", id: 1},
		white_flower: { sheet: "000000000057", id: 6},
		umbrella_egg: { sheet: "000000000041", id: 4},
		frog_egg: { sheet: "000000000040", id: 1},
		hat_scarf_egg: { sheet: "000000000040", id: 7},
		l_hair_egg: { sheet: "000000000042", id: 5},
		p_hair_egg: { sheet: "000000000042", id: 2},
		b_hair_egg: { sheet: "000000000041", id: 2},
		flute_egg: { sheet: "000000000041", id: 0},
		no_face_egg: { sheet: "000000000042", id: 3},
		eye_palm_egg: { sheet: "000000000040", id: 6},
		towel_egg: { sheet: "000000000041", id: 1},
		knife_egg: { sheet: "000000000040", id: 3},
		bicycle_egg: { sheet: "000000000041", id: 7},
		severed_head_egg: { sheet: "000000000041", id: 5},
		neon_egg: { sheet: "000000000040", id: 0},
		triangle_kerchief_egg: { sheet: "000000000040", id: 4},
		fat_egg: { sheet: "000000000040", id: 2},
		cat_egg: { sheet: "000000000042", id: 4},
		midget_egg: { sheet: "000000000041", id: 6},
		snow_woman_egg: { sheet: "000000000041", id: 3},
		lamp_egg: { sheet: "000000000042", id: 0},
		Witch_egg: { sheet: "000000000050", id: 4},
		oni_egg: { sheet: "000000000050", id: 5},
		squish_egg: { sheet: "000000000050", id: 6},
		stoplight_egg: { sheet: "000000000050", id: 7}
	}
}

function SpriteListCommand(args) {
	let liststr = "";
	liststr = "default\n";
	if(spriteList[gameName]) {
		let keys = Object.keys(spriteList[gameName]);
		for(let k of keys) {
			liststr += k + "\n";
		}
	}

	if(Object.keys(favsprites).length) {
		liststr += "\n***===favourites===***\n";
		for(let favsprite in favsprites) {
			liststr += favsprite + "\n";
		}
	}

	PrintChatInfo(liststr, "SpriteList");
	return true;
}

function SpriteSetCommand(args) {
	if(args.length == 2) {
		let sprite = undefined;
		
		if(args[1] == "default") {
			sprite = {sheet: "", id: 0};
		} else {
			//trying to find sprite name in favorite sprites
			sprite = favsprites[args[1]];
			//if sprite was not found in favorites then try to find it in default sprite list
			if(!sprite && spriteList[gameName])
				sprite = spriteList[gameName][args[1]];
		


			if(sprite) {
				sheet = Module.allocate(Module.intArrayFromString(sprite.sheet), Module.ALLOC_NORMAL);
  				Module._SlashCommandSetSprite(sheet, sprite.id);
  				Module._free(sheet);
			} else {
				PrintChatInfo("Unknown sprite name, see /spritelist", "SpriteSet");
			}
		}
	} else if(args.length == 3) {
		let id = parseInt(args[2]);

		if(!isNaN(id) || id < 0 || id > 7) {
			let valid = !spriteList[gameName] || spriteSheetList[gameName] == undefined;
			if(!valid)
				valid = spriteSheetList[gameName].includes(args[1]);
			if(valid) {	
				sheet = Module.allocate(Module.intArrayFromString(args[1]), Module.ALLOC_NORMAL);
  				Module._SlashCommandSetSprite(sheet, id);
  				Module._free(sheet);

			} else {
				PrintChatInfo("Unknown sprite sheet", "SpriteSet");
			}
		} else {
			PrintChatInfo("Invalid id, id has to be a number from 0 to 7", "SpriteSet");
		}
	} else {
		return false;
	}
	return true;
}
